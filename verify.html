<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verify Mover Enrollment | Interstate Compliance Solutions</title>
    <meta name="description" content="Verify if your moving company is enrolled in our arbitration program. Check enrollment status and learn about your dispute resolution options.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: { 50: '#f0f3f9', 100: '#d9e0ed', 200: '#b3c1db', 300: '#8da2c9', 400: '#6783b7', 500: '#4164a5', 600: '#345084', 700: '#273c63', 800: '#1a2842', 900: '#0a1628', 950: '#050b14' },
                        gold: { 50: '#fdf9ef', 100: '#f9f0d6', 200: '#f2deac', 300: '#eac978', 400: '#e2b44e', 500: '#c9a227', 600: '#b8891d', 700: '#966a19', 800: '#7a551b', 900: '#65461a', 950: '#39240b' },
                        cream: { 50: '#fefdfb', 100: '#fdf9f3', 200: '#faf3e6' }
                    },
                    fontFamily: { sans: ['DM Sans', 'sans-serif'], display: ['Fraunces', 'serif'] }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="font-sans" style="background-color: #fefdfb; color: #0a1628;">
    <!-- Navigation -->
    <nav class="sticky top-0 z-50 shadow-lg" style="background-color: #0a1628; color: #ffffff;">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 lg:h-20">
                <a href="/" class="flex items-center space-x-2">
                    <div class="w-10 h-10 bg-gold-500 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-navy-900" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/>
                        </svg>
                    </div>
                    <span class="font-display font-bold text-xl">Interstate Compliance</span>
                </a>
                <div class="hidden lg:flex items-center space-x-6">
                    <a href="/" class="hover:text-gold-400 transition-colors">Home</a>
                    <a href="/contact" class="hover:text-gold-400 transition-colors">Contact</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="text-white py-16" style="background: linear-gradient(135deg, #0a1628 0%, #1a2842 50%, #0a1628 100%);">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="font-display text-4xl font-bold mb-4" style="color: #ffffff;">Consumer Verification</h1>
            <p class="text-xl" style="color: #b3c1db;">
                Verify if your moving company is enrolled in our Arbitration Program
            </p>
        </div>
    </section>

    <!-- Verification Form -->
    <section class="py-16">
        <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <form id="verify-form" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-navy-900 mb-2">Your Name *</label>
                        <input type="text" id="consumer_name" required class="w-full px-4 py-3 border border-navy-200 rounded-lg focus:ring-2 focus:ring-gold-500 focus:border-gold-500">
                    </div>

                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-navy-900 mb-2">Your Email *</label>
                            <input type="email" id="consumer_email" required class="w-full px-4 py-3 border border-navy-200 rounded-lg focus:ring-2 focus:ring-gold-500 focus:border-gold-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-navy-900 mb-2">Your Phone</label>
                            <input type="tel" id="consumer_phone" class="w-full px-4 py-3 border border-navy-200 rounded-lg focus:ring-2 focus:ring-gold-500 focus:border-gold-500">
                        </div>
                    </div>

                    <div class="border-t border-navy-100 pt-6">
                        <h3 class="font-semibold text-navy-900 mb-4">Moving Company Information</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-navy-900 mb-2">Moving Company Name</label>
                                <input type="text" id="mover_name" class="w-full px-4 py-3 border border-navy-200 rounded-lg focus:ring-2 focus:ring-gold-500 focus:border-gold-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-navy-900 mb-2">MC Number *</label>
                                <input type="text" id="mover_mc_number" required data-type="mc-number" class="w-full px-4 py-3 border border-navy-200 rounded-lg focus:ring-2 focus:ring-gold-500 focus:border-gold-500" placeholder="MC-123456">
                                <p class="mt-1 text-xs text-navy-500">Found on the mover's Bill of Lading or truck</p>
                            </div>
                        </div>
                    </div>

                    <div class="border-t border-navy-100 pt-6">
                        <h3 class="font-semibold text-navy-900 mb-4">Dispute Information</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-navy-900 mb-2">Type of Dispute</label>
                                <select id="dispute_type" class="w-full px-4 py-3 border border-navy-200 rounded-lg focus:ring-2 focus:ring-gold-500 focus:border-gold-500">
                                    <option value="">Select type...</option>
                                    <option value="loss_damage">Loss or Damage to Goods</option>
                                    <option value="overcharge">Overcharge / Billing Dispute</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="bg-navy-50 rounded-lg p-4">
                                <label class="flex items-start">
                                    <input type="checkbox" id="filed_claim" class="w-5 h-5 mt-0.5 text-gold-500 border-navy-300 rounded focus:ring-gold-500">
                                    <span class="ml-3 text-sm text-navy-700">
                                        I have already filed a written claim directly with the moving company
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <button type="submit" id="verify-btn" class="w-full bg-gold-500 hover:bg-gold-600 text-navy-900 font-bold py-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                        <span id="verify-text">Verify Enrollment</span>
                        <span id="verify-loading" class="hidden">
                            <svg class="animate-spin inline-block w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
                            </svg>
                            Checking...
                        </span>
                    </button>
                </form>

                <!-- Results Section -->
                <div id="results" class="hidden mt-8 pt-8 border-t border-navy-100">
                    <!-- Results will be inserted here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Info Section -->
    <section class="py-16 bg-white">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="font-display text-2xl font-bold mb-6">What is Arbitration?</h2>
            <div class="prose prose-navy max-w-none">
                <p class="text-navy-600 mb-4">
                    Arbitration is a dispute resolution process required by federal law for interstate household goods movers. It provides an alternative to court litigation for resolving disputes about loss, damage, or charges.
                </p>
                <h3 class="font-semibold text-lg mt-6 mb-3">Before Requesting Arbitration:</h3>
                <ol class="list-decimal list-inside space-y-2 text-navy-600">
                    <li>You must first file a written claim directly with the moving company</li>
                    <li>The mover has 30 days to acknowledge your claim</li>
                    <li>The mover has 120 days to pay, decline, or make a settlement offer</li>
                    <li>If you're not satisfied with the response, you may request arbitration</li>
                </ol>
                <h3 class="font-semibold text-lg mt-6 mb-3">Claim Thresholds:</h3>
                <ul class="list-disc list-inside space-y-2 text-navy-600">
                    <li><strong>Claims $10,000 or less:</strong> You may choose binding arbitration, and the mover must participate</li>
                    <li><strong>Claims over $10,000:</strong> Both parties must agree to arbitration</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-navy-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-2 mb-4 md:mb-0">
                    <div class="w-8 h-8 bg-gold-500 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-navy-900" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/>
                        </svg>
                    </div>
                    <span class="font-display font-bold">Interstate Compliance Solutions</span>
                </div>
                <div class="text-sm text-navy-400">
                    Questions? Call <a href="tel:1-800-555-0199" class="text-gold-400 hover:text-gold-300">1-800-555-0199</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        document.getElementById('mover_mc_number').addEventListener('input', function() {
            InterstateCompliance.formatMCNumber(this);
        });

        document.getElementById('verify-form').addEventListener('submit', async function(e) {
            e.preventDefault();

            const verifyBtn = document.getElementById('verify-btn');
            const verifyText = document.getElementById('verify-text');
            const verifyLoading = document.getElementById('verify-loading');
            const resultsDiv = document.getElementById('results');

            verifyBtn.disabled = true;
            verifyText.classList.add('hidden');
            verifyLoading.classList.remove('hidden');

            try {
                const response = await fetch('/api/verify', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        consumer_name: document.getElementById('consumer_name').value,
                        consumer_email: document.getElementById('consumer_email').value,
                        consumer_phone: document.getElementById('consumer_phone').value,
                        mover_name: document.getElementById('mover_name').value,
                        mover_mc_number: document.getElementById('mover_mc_number').value,
                        dispute_type: document.getElementById('dispute_type').value,
                        filed_claim_with_mover: document.getElementById('filed_claim').checked
                    })
                });

                const data = await response.json();

                if (data.success) {
                    if (data.data.enrolled) {
                        resultsDiv.innerHTML = `
                            <div class="bg-green-50 border border-green-200 rounded-xl p-6">
                                <div class="flex items-center mb-4">
                                    <svg class="w-8 h-8 text-green-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    <h3 class="text-xl font-bold text-green-800">Mover is Enrolled</h3>
                                </div>
                                <div class="mb-4">
                                    <p class="text-green-700"><strong>Company:</strong> ${data.data.mover.company_name}</p>
                                    <p class="text-green-700"><strong>MC Number:</strong> ${data.data.mover.mc_number}</p>
                                </div>
                                <div class="bg-white rounded-lg p-4 mt-4">
                                    <h4 class="font-semibold mb-2">Next Steps:</h4>
                                    <ol class="list-decimal list-inside space-y-1 text-sm text-navy-600">
                                        ${data.data.arbitration_info.next_steps.map(step => `<li>${step}</li>`).join('')}
                                    </ol>
                                </div>
                                <div class="mt-4 p-4 bg-white rounded-lg">
                                    <h4 class="font-semibold mb-2">Arbitration Provider:</h4>
                                    <p class="text-navy-600"><strong>${data.data.arbitration_info.arbitration_provider.name}</strong></p>
                                    <p class="text-navy-600">Phone: ${data.data.arbitration_info.arbitration_provider.phone}</p>
                                    <p class="text-navy-600">Website: <a href="https://${data.data.arbitration_info.arbitration_provider.website}" target="_blank" class="text-gold-600 hover:text-gold-700">${data.data.arbitration_info.arbitration_provider.website}</a></p>
                                </div>
                            </div>
                        `;
                    } else {
                        resultsDiv.innerHTML = `
                            <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-6">
                                <div class="flex items-center mb-4">
                                    <svg class="w-8 h-8 text-yellow-500 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                    </svg>
                                    <h3 class="text-xl font-bold text-yellow-800">Mover Not Found</h3>
                                </div>
                                <p class="text-yellow-700 mb-4">${data.data.message}</p>
                                <div class="bg-white rounded-lg p-4">
                                    <h4 class="font-semibold mb-2">Suggestions:</h4>
                                    <ul class="list-disc list-inside space-y-1 text-sm text-navy-600">
                                        ${data.data.suggestions.map(s => `<li>${s}</li>`).join('')}
                                    </ul>
                                </div>
                                <div class="mt-4">
                                    <h4 class="font-semibold mb-2">Helpful Resources:</h4>
                                    <p class="text-sm"><a href="${data.data.resources.fmcsa_complaints}" target="_blank" class="text-gold-600 hover:text-gold-700">File FMCSA Complaint</a></p>
                                </div>
                            </div>
                        `;
                    }
                    resultsDiv.classList.remove('hidden');
                    resultsDiv.scrollIntoView({ behavior: 'smooth' });
                } else {
                    throw new Error(data.message || 'Verification failed');
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="bg-red-50 border border-red-200 rounded-xl p-6">
                        <p class="text-red-700">${error.message}</p>
                    </div>
                `;
                resultsDiv.classList.remove('hidden');
            } finally {
                verifyBtn.disabled = false;
                verifyText.classList.remove('hidden');
                verifyLoading.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
